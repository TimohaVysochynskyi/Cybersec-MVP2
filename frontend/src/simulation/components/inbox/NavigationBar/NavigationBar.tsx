import css from "./NavigationBar.module.css";
import type { EmailCategory, UserProgress } from "../../../../types/email";

interface NavigationBarProps {
  currentCategory: EmailCategory;
  onCategoryChange: (category: EmailCategory) => void;
  userProgress: UserProgress;
  searchQuery: string;
  onSearchChange: (query: string) => void;
  emailCounts: {
    all: number;
    inbox: number;
    spam: number;
  };
}

export default function NavigationBar({
  currentCategory,
  onCategoryChange,
  userProgress,
  searchQuery,
  onSearchChange,
  emailCounts,
}: NavigationBarProps) {
  return (
    <>
      <nav className={css.nav}>
        <button
          className={`${css.button} ${
            currentCategory === "all" ? css.active : ""
          }`}
          onClick={() => onCategoryChange("all")}
        >
          <svg
            className={css.icon}
            viewBox="0 0 28 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M25.3333 5.01465C25.9465 5.40648 26.4512 5.94644 26.8007 6.58469C27.1502 7.22295 27.3334 7.93895 27.3333 8.66665V16.6666C27.3333 20.5333 24.2 23.6666 20.3333 23.6666H8.33333C7.60563 23.6667 6.88963 23.4836 6.25138 23.134C5.61312 22.7845 5.07317 22.2798 4.68133 21.6666H20.3333C21.6594 21.6666 22.9312 21.1399 23.8689 20.2022C24.8066 19.2645 25.3333 17.9927 25.3333 16.6666V5.01465ZM4.33333 0.333313H19.6667C20.7735 0.333241 21.8384 0.756718 22.643 1.51688C23.4475 2.27703 23.9307 3.31624 23.9933 4.42131L24 4.66665V16C24.0001 17.1068 23.5766 18.1718 22.8164 18.9763C22.0563 19.7808 21.0171 20.264 19.912 20.3266L19.6667 20.3333H4.33333C3.22648 20.3334 2.16156 19.9099 1.35703 19.1497C0.552489 18.3896 0.0693316 17.3504 0.00666683 16.2453L9.30025e-09 16V4.66665C-7.24623e-05 3.5598 0.423405 2.49488 1.18356 1.69034C1.94372 0.885802 2.98293 0.402645 4.088 0.33998L4.33333 0.333313ZM22 6.86531L12.4667 11.8853C12.3439 11.9499 12.209 11.9883 12.0706 11.9979C11.9321 12.0075 11.7932 11.9883 11.6627 11.9413L11.5347 11.8853L2 6.86665V16C2.00002 16.5856 2.22023 17.1497 2.61691 17.5805C3.01359 18.0113 3.55773 18.2771 4.14133 18.3253L4.33333 18.3333H19.6667C20.2525 18.3333 20.8168 18.1129 21.2476 17.7159C21.6784 17.319 21.9441 16.7745 21.992 16.1906L22 16V6.86531ZM19.6667 2.33331H4.33333C3.74775 2.33333 3.18358 2.55354 2.75281 2.95022C2.32205 3.3469 2.05619 3.89105 2.008 4.47465L2.00267 4.60798L12 9.86931L22 4.60665C21.9844 3.99827 21.7316 3.42007 21.2957 2.99538C20.8598 2.57069 20.2752 2.33311 19.6667 2.33331Z"
              fill="#3440E7"
            />
          </svg>
          <span>Уся пошта</span>
          <span className={css.count}>({emailCounts.all})</span>
        </button>
        <button
          className={`${css.button} ${
            currentCategory === "inbox" ? css.active : ""
          }`}
          onClick={() => onCategoryChange("inbox")}
        >
          <svg
            className={css.icon}
            viewBox="0 0 26 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M22.9412 20.25V14.1C23.486 13.827 23.9988 13.4966 24.4706 13.1145V20.25C24.4706 21.2446 24.0678 22.1984 23.3507 22.9016C22.6337 23.6049 21.6611 24 20.6471 24H3.82353C2.80947 24 1.83694 23.6049 1.11989 22.9016C0.402835 22.1984 0 21.2446 0 20.25V8.25C0 7.25544 0.402835 6.30161 1.11989 5.59835C1.83694 4.89509 2.80947 4.5 3.82353 4.5H11.0225C10.8811 4.99036 10.7864 5.4925 10.7395 6H3.82353C3.21509 6 2.63157 6.23705 2.20134 6.65901C1.77111 7.08097 1.52941 7.65326 1.52941 8.25V8.703L12.2353 14.88L14.4392 13.608C14.9367 13.935 15.4685 14.2085 16.0344 14.4285L12.6238 16.3965C12.5262 16.4527 12.4172 16.4869 12.3045 16.4968C12.1919 16.5066 12.0784 16.4918 11.9722 16.4535L11.8468 16.3965L1.52941 10.4445V20.25C1.52941 20.8467 1.77111 21.419 2.20134 21.841C2.63157 22.2629 3.21509 22.5 3.82353 22.5H20.6471C21.2555 22.5 21.839 22.2629 22.2692 21.841C22.6995 21.419 22.9412 20.8467 22.9412 20.25ZM19.1176 13.5C17.2923 13.5 15.5418 12.7888 14.2511 11.523C12.9604 10.2571 12.2353 8.54021 12.2353 6.75C12.2353 4.95979 12.9604 3.2429 14.2511 1.97703C15.5418 0.711159 17.2923 0 19.1176 0C20.943 0 22.6935 0.711159 23.9842 1.97703C25.2749 3.2429 26 4.95979 26 6.75C26 8.54021 25.2749 10.2571 23.9842 11.523C22.6935 12.7888 20.943 13.5 19.1176 13.5ZM15.5174 7.281L18.5762 10.281L18.5808 10.284C18.7227 10.4213 18.9137 10.4988 19.1131 10.5H19.1222C19.3231 10.4988 19.5153 10.4201 19.6575 10.281L22.7164 7.281C22.7875 7.21137 22.8439 7.12868 22.8824 7.03766C22.9209 6.94664 22.9408 6.84908 22.9408 6.75053C22.9409 6.65198 22.9212 6.55439 22.8828 6.46332C22.8444 6.37225 22.7881 6.28948 22.7171 6.21975C22.6461 6.15002 22.5618 6.09468 22.469 6.05691C22.3762 6.01913 22.2767 5.99965 22.1762 5.99958C22.0758 5.99951 21.9763 6.01885 21.8834 6.0565C21.7905 6.09415 21.7062 6.14937 21.6351 6.219L19.8824 7.9395V3.75C19.8824 3.55109 19.8018 3.36032 19.6584 3.21967C19.515 3.07902 19.3205 3 19.1176 3C18.9148 3 18.7203 3.07902 18.5769 3.21967C18.4335 3.36032 18.3529 3.55109 18.3529 3.75V7.9395L16.6002 6.219C16.4566 6.07817 16.2619 5.99905 16.0588 5.99905C15.8558 5.99905 15.661 6.07817 15.5174 6.219C15.3738 6.35983 15.2932 6.55084 15.2932 6.75C15.2932 6.94916 15.3738 7.14017 15.5174 7.281Z"
              fill="#3440E7"
            />
          </svg>
          <span>Вхідні</span>
          <span className={css.count}>({emailCounts.inbox})</span>
        </button>
        <button
          className={`${css.button} ${
            currentCategory === "spam" ? css.active : ""
          }`}
          onClick={() => onCategoryChange("spam")}
        >
          <svg
            className={css.icon}
            viewBox="0 0 27 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M27 6.94737C27 8.78992 26.255 10.557 24.9288 11.8599C23.6027 13.1628 21.804 13.8947 19.9286 13.8947C18.0531 13.8947 16.2545 13.1628 14.9283 11.8599C13.6022 10.557 12.8571 8.78992 12.8571 6.94737C12.8571 5.10481 13.6022 3.33772 14.9283 2.03484C16.2545 0.731953 18.0531 0 19.9286 0C21.804 0 23.6027 0.731953 24.9288 2.03484C26.255 3.33772 27 5.10481 27 6.94737ZM14.7857 6.94737C14.7857 8.00084 15.1136 8.97853 15.6741 9.78695L22.8189 2.76758C22.0457 2.25147 21.144 1.95214 20.2106 1.90177C19.2773 1.8514 18.3476 2.0519 17.5216 2.48171C16.6955 2.91152 16.0043 3.55438 15.5223 4.3412C15.0403 5.12801 14.7856 6.02902 14.7857 6.94737ZM19.9286 12C20.8633 12.0001 21.7804 11.7499 22.5813 11.2763C23.3821 10.8027 24.0365 10.1237 24.474 9.31212C24.9115 8.50057 25.1155 7.58721 25.0643 6.67025C25.013 5.75328 24.7083 4.86739 24.183 4.10779L17.0383 11.1272C17.8909 11.6961 18.8979 12.0002 19.9286 12ZM23.7857 19.8947V14.2333C24.4913 13.8719 25.1407 13.4134 25.7143 12.8716V19.8947C25.7144 20.9433 25.306 21.9522 24.573 22.7144C23.84 23.4766 22.8379 23.9343 21.7723 23.9937L21.5357 24H4.17857C3.11125 24.0001 2.08436 23.5989 1.30856 22.8787C0.532757 22.1586 0.0668554 21.1741 0.00642873 20.1272L8.96809e-09 19.8947V7.89474C-6.98744e-05 6.84614 0.408284 5.83727 1.14129 5.07508C1.8743 4.31288 2.87639 3.85516 3.942 3.79579L4.17857 3.78947H12.2117C11.9542 4.39739 11.772 5.03354 11.6691 5.68421H4.17857C3.6139 5.68423 3.06988 5.89285 2.6545 6.26865C2.23912 6.64445 1.98275 7.15996 1.93629 7.71284L1.92857 7.89474V8.43663L12.8571 14.088L14.535 13.2189C15.0994 13.6876 15.7269 14.0842 16.4044 14.3937L13.3059 15.9966C13.1876 16.0577 13.0578 16.0939 12.9245 16.103C12.7913 16.1121 12.6576 16.094 12.5319 16.0497L12.4084 15.9966L1.92857 10.5777V19.8947C1.92859 20.4495 2.14093 20.984 2.52345 21.3921C2.90596 21.8002 3.43067 22.052 3.99343 22.0977L4.17857 22.1053H21.5357C22.1006 22.1052 22.6448 21.8964 23.0602 21.5204C23.4756 21.1443 23.7318 20.6285 23.778 20.0754L23.7857 19.8947Z"
              fill="#3440E7"
            />
          </svg>
          <span>Небажана пошта</span>
          <span className={css.count}>({emailCounts.spam})</span>
        </button>

        {/* Прогрес користувача */}
        <div className={css.progressWrapper}>
          <div className={css.progressInfo}>
            <span className={css.progressText}>
              Прогрес: {userProgress.points}/
              {userProgress.totalClassifiableEmails}
            </span>
            <span className={css.percentage}>
              {userProgress.completionPercentage}%
            </span>
          </div>
        </div>

        <label htmlFor="searchInput" className={css.searchWrapper}>
          <svg
            className={css.searchIcon}
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M23 23L17.6919 17.6919M17.6919 17.6919C18.5999 16.784 19.3201 15.7061 19.8115 14.5198C20.3029 13.3335 20.5558 12.062 20.5558 10.7779C20.5558 9.49386 20.3029 8.22238 19.8115 7.03607C19.3202 5.84976 18.5999 4.77185 17.6919 3.86389C16.784 2.95592 15.7061 2.23569 14.5198 1.7443C13.3335 1.25291 12.062 1 10.7779 1C9.49386 1 8.22238 1.25291 7.03607 1.7443C5.84976 2.23569 4.77185 2.95592 3.86389 3.86389C2.03017 5.6976 1 8.18465 1 10.7779C1 13.3712 2.03017 15.8582 3.86389 17.6919C5.6976 19.5257 8.18465 20.5558 10.7779 20.5558C13.3712 20.5558 15.8582 19.5257 17.6919 17.6919Z"
              stroke="#3440E7"
              strokeWidth="2"
              strokeLinecap="round"
              strokeLinejoin="round"
            />
          </svg>

          <input
            id="searchInput"
            type="text"
            className={css.search}
            placeholder="Пошук"
            value={searchQuery}
            onChange={(e) => onSearchChange(e.target.value)}
          />
        </label>
      </nav>
    </>
  );
}
